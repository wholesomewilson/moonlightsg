<div class="row prelaunch text-center">
  <div class="col-xs-12 col-sm-offset-2 col-sm-8 col-md-offset-3 col-md-6 col-lg-offset-3 col-lg-6">
    <div class="prelaunch_wrapper">
      <%= image_tag('prelaunch2.png', size:"350x350") %>
    </div>
    <div class="prelaunch_text relative">
      Did you know you could save to up 50% on baby products and 59% on cosmetics by purchasing them across the causeway?<br>
      <br>Hate the long queue at the immigration counters?<br>No time to travel to JB?<br>
      <br>Get matched with a shopper to buy your items through our crowdsourcing platform.
    </div>
    <div class="email_form text-center">
      <%= form_for @email, url: mailinglists_path(@email) do |f| %>
        <%= f.text_field :body, class:"form-control email_form_field text-center", placeholder:"Email Address" %>
        <span class="missinginfo-2" id="missinginfo_mail">Your email is invalid!</span>
        <%= f.submit 'SIGN UP FOR EARLY INVITATION', class:"btn-changes-2" %>
      <% end %>
    </div>
  </div>
</div>
<script>

$(document).ready(function(){
  $('.mainnav').remove()
  $('body').css('background-color', '#F4F3F0')
})

$("#email_body").on("input",function(){
  var input_email = $(this)
  var re = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
  var form_data_email =re.test(input_email.val());
  if (form_data_email) {
    $(this).removeClass("empty").addClass("not_empty");
    $('.btn-changes-2').prop('disabled', false);
  }
  else {
    $(this).removeClass("not_empty").addClass("empty");
    $('.btn-changes-2').prop('disabled', true);
  }
  check_control_form($(this))
});

function check_control_form(obj) {
  var get_id = obj.attr("id")
  var missingkey = get_id.slice(-4)
  if (obj.hasClass("not_empty")){
    $('#missinginfo_mail').css('display', 'none')
    obj.css('border', '1px solid #23B3B9')
  }
  else{
    $('#missinginfo_mail').css('display', 'block')
    obj.css('border', '1px solid #DC4C46')
  }
}

</script>
